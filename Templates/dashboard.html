<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Text Editor - Dashboard</title>
    <link rel="stylesheet" href="/Templates/dashboard.css">
</head>
<body>
    <div class="dashboard-container fade-in">
        <!-- Header -->
        <div class="header">
            <h1><span>📝</span><span>Advanced Text Editor</span></h1>
            <p>Create, edit, and manage your documents with powerful features</p>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Create New Document Section -->
            <div class="create-section">
                <h2><span>✨</span> Create New Document</h2>
                <form class="create-form" action="/create" method="post">
                    <div class="form-group">
                        <label for="title">Document Title</label>
                        <input type="text" id="title" name="title" placeholder="Enter document title... (Ctrl+N)" required maxlength="100">
                    </div>
                    <button type="submit" class="btn btn-primary"><span>🚀</span> Create Document</button>
                </form>
            </div>

            <!-- Documents Section -->
            <div class="documents-section">
                <h2><span>📚</span> Your Documents <span style="font-size: 0.6em; color: #6c757d;">({{ documents|length }})</span></h2>
                {% if documents %}
                    <div class="documents-grid">
                        {% for doc in documents %}
                        <div class="document-card">
                            <div class="document-title"><span>📄</span>{{ doc.title }}</div>
                            <div class="document-meta">
                                <div class="meta-item"><span>📅</span><strong>Modified:</strong> {{ doc.modified[:10] }}</div>
                                <div class="meta-item"><span>📏</span><strong>Lines:</strong> {{ doc.lines }}</div>
                                <div class="meta-item"><span>💾</span><strong>Size:</strong> {{ "%.1f"|format(doc.size / 1024) }} KB</div>
                                <div class="meta-item"><span>🕒</span><strong>Time:</strong> {{ doc.modified[11:16] }}</div>
                            </div>
                            <div class="document-actions">
                                <a href="/editor/{{ doc.id }}" class="btn btn-primary btn-sm"><span>✏️</span> Edit</a>
                                <button class="btn btn-secondary btn-sm" onclick="showBackups('{{ doc.id }}', '{{ doc.title }}')"><span>🕒</span> Backups</button>
                                <button class="btn btn-danger btn-sm" onclick="deleteDocument('{{ doc.id }}', '{{ doc.title }}')"><span>🗑️</span> Delete</button>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                {% else %}
                    <div class="empty-state">
                        <div class="empty-icon">📭</div>
                        <h3>No documents yet</h3>
                        <p>Create your first document to get started!</p>
                    </div>
                {% endif %}
            </div>
            <div class="loading" id="loadingState"><div class="spinner"></div><p>Processing...</p></div>
        </div>
    </div>

    <!-- Backup Modal -->
    <div id="backupModal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="backupModalTitle">Backups</h3>
                <button class="btn btn-sm btn-danger" onclick="closeModal()">×</button>
            </div>
            <div class="modal-body" id="backupModalBody">
                <div class="loading" id="modalLoadingState"><div class="spinner"></div><p>Fetching backups...</p></div>
                <ul class="backup-list" id="backupList"></ul>
            </div>
        </div>
    </div>

    <script src="/Templates/dashboard.js"></script>
</body>
</html>